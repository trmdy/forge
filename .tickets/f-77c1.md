---
id: f-77c1
status: closed
deps: [f-f710, f-e441, f-bfec]
links: []
created: 2026-01-10T20:13:01Z
type: task
priority: 3
assignee: Tormod Haugland
parent: f-c2d0
---
# Connected mode: live presence via forged

In connected mode, the spec calls out "Live agent presence". Define and implement presence signals when fmail clients are connected to forged.

Scope:
- Define what "presence" means:
  - active watchers?
  - last_seen heartbeat?
  - status values?
- Implement presence tracking in forged (per project):
  - track connected clients (agent name + host)
  - update last_seen periodically
- Ensure `fmail who` reflects presence when connected (either by reading files updated by forged or querying the server)

References:
- docs/forge-mail/SPEC.md (Two Modes: live agent presence)

## Acceptance Criteria

- When connected to forged, presence updates are visible within a few seconds (who shows recent activity)
- Presence tracking is scoped per project ID
- Does not break standalone mode behavior


## Notes

**2026-01-11T09:11:12Z**

Implemented forged presence heartbeat for watch connections; agent registry last_seen updated on interval.
